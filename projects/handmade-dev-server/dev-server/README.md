# dev-server

핸드메이드 MF 데브 서버

1. parcel watcher
2. fastify
3. webpack-dev-middleware말고 webpack으로 직접 미들웨어 만들기
4. fast refresh

## 아마 이렇게 가면 될듯

1. 정적 자원 서빙하는 서버 구동 -> 어디서 실행해도 모두가 실행될 수 있도록
2. 서버 안에서 watcher 실행 -> 여러개 서버가 한번에 실행되는 경우를 고려
3. watcher가 파일 바뀌었다고 하면 webpack 리컴파일 실행 -> watcher는 하나만, 워처가 워치하는 부분 잡기
4. 소켓 등으로 브라우저가 webpack이 리컴파일 되었음을 알게 함
5. 브라우저에서는 fast refresh를 통해 상태값을 유지시킴

## Requirements

- [ ] 서버를 실행할 수 있는 코드를 bin으로 제공해야함
- [ ] 앱 디렉토리에서 bin으로 커맨드를 구동한 후 앱 디렉토리 + 알파가 파일워치 되어야함
- [ ] 워치하는 범위를 바꿀 수 있어야 하고, 미리 잘 알 수 있어야 하며, 지표로 현재 워치하고 있는 파일의 개수와 항목을 map 등으로 확인할 수 있어야함
- [ ] 사용하는 리소스를 파악할 수는 없을까? 이건 Process를 떠봐야 할 것 같은데 잘 모르겠긔
- [ ] 리컴파일 완료시 브라우저가 알아야함(web-socket?) 단 이때 서버는 꺼지면 안됨. 서버는 기동시에 딱 한번만 뜨고, 그 이후에 watcher를 실행시키기

## 의문

- 워처나 데브서버의 속도가 그렇게 중요한가? 얘네는 캐파와 리소스가 더 중요하다
- 성능을 어떻게 비교할 수 있나
- SSR은 어떻게 대응할 수 있을까?
- react-refresh는 어캐 붙이는 것인가..? nextjs는 어떻게 하고있을까?
- 디렉토리는 설정할 수 있지만 limit을 따로 설정할 수 있는 watcher가 있어야될거같은디

## Reference
